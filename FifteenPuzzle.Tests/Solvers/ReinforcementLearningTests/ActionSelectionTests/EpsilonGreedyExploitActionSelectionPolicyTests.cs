namespace FifteenPuzzle.Tests.SolverTests.ReinforcementLearningTests.ActionSelectionTests;

using FifteenPuzzle.Solvers.ReinforcementLearning;
using FifteenPuzzle.Solvers.ReinforcementLearning.ActionSelection;
using FifteenPuzzle.Tests.Common.AutoFixture;
using NUnit.Framework;
using Shouldly;

public class EpsilonGreedyExploitActionSelectionPolicyTests
{
	[Test, AutoMoqData]
	public void ShouldPickTheHighestValueAction(
		ActionQValues actionQValueCollection,
		EpsilonGreedyExploitActionSelectionPolicy sut)
	{
		//Arrange
		var actionQValues = actionQValueCollection.ToArray();
		var expectedExploitActionWithMaxQValue = actionQValues.MaxBy(a => a.QValue);
		//Act
		var result = sut.PickAction(actionQValueCollection);
        //Assert
		result.ShouldBe(expectedExploitActionWithMaxQValue);
	}
}
